<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hedera MetaMask Adapter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="antialiased">
  <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="display: none">
    <symbol id="metamask-fox">
      <style type="text/css">
        .st0{fill:#E2761B;stroke:#E2761B;stroke-linecap:round;stroke-linejoin:round;}
        .st1{fill:#E4761B;stroke:#E4761B;stroke-linecap:round;stroke-linejoin:round;}
        .st2{fill:#D7C1B3;stroke:#D7C1B3;stroke-linecap:round;stroke-linejoin:round;}
        .st3{fill:#233447;stroke:#233447;stroke-linecap:round;stroke-linejoin:round;}
        .st4{fill:#CD6116;stroke:#CD6116;stroke-linecap:round;stroke-linejoin:round;}
        .st5{fill:#E4751F;stroke:#E4751F;stroke-linecap:round;stroke-linejoin:round;}
        .st6{fill:#F6851B;stroke:#F6851B;stroke-linecap:round;stroke-linejoin:round;}
        .st7{fill:#C0AD9E;stroke:#C0AD9E;stroke-linecap:round;stroke-linejoin:round;}
        .st8{fill:#161616;stroke:#161616;stroke-linecap:round;stroke-linejoin:round;}
        .st9{fill:#763D16;stroke:#763D16;stroke-linecap:round;stroke-linejoin:round;}
      </style>
      <polygon class="st0" points="274.1,35.5 174.6,109.4 193,65.8 "/>
      <g>
        <polygon class="st1" points="44.4,35.5 143.1,110.1 125.6,65.8 	"/>
        <polygon class="st1" points="238.3,206.8 211.8,247.4 268.5,263 284.8,207.7 	"/>
        <polygon class="st1" points="33.9,207.7 50.1,263 106.8,247.4 80.3,206.8 	"/>
        <polygon class="st1" points="103.6,138.2 87.8,162.1 144.1,164.6 142.1,104.1 	"/>
        <polygon class="st1" points="214.9,138.2 175.9,103.4 174.6,164.6 230.8,162.1 	"/>
        <polygon class="st1" points="106.8,247.4 140.6,230.9 111.4,208.1 	"/>
        <polygon class="st1" points="177.9,230.9 211.8,247.4 207.1,208.1 	"/>
      </g>
      <g>
        <polygon class="st2" points="211.8,247.4 177.9,230.9 180.6,253 180.3,262.3 	"/>
        <polygon class="st2" points="106.8,247.4 138.3,262.3 138.1,253 140.6,230.9 	"/>
      </g>
      <polygon class="st3" points="138.8,193.5 110.6,185.2 130.5,176.1 "/>
      <polygon class="st3" points="179.7,193.5 188,176.1 208,185.2 "/>
      <g>
        <polygon class="st4" points="106.8,247.4 111.6,206.8 80.3,207.7 	"/>
        <polygon class="st4" points="207,206.8 211.8,247.4 238.3,207.7 	"/>
        <polygon class="st4" points="230.8,162.1 174.6,164.6 179.8,193.5 188.1,176.1 208.1,185.2 	"/>
        <polygon class="st4" points="110.6,185.2 130.6,176.1 138.8,193.5 144.1,164.6 87.8,162.1 	"/>
      </g>
      <g>
        <polygon class="st5" points="87.8,162.1 111.4,208.1 110.6,185.2 	"/>
        <polygon class="st5" points="208.1,185.2 207.1,208.1 230.8,162.1 	"/>
        <polygon class="st5" points="144.1,164.6 138.8,193.5 145.4,227.6 146.9,182.7 	"/>
        <polygon class="st5" points="174.6,164.6 171.9,182.6 173.1,227.6 179.8,193.5 	"/>
      </g>
      <polygon class="st6" points="179.8,193.5 173.1,227.6 177.9,230.9 207.1,208.1 208.1,185.2 "/>
      <polygon class="st6" points="110.6,185.2 111.4,208.1 140.6,230.9 145.4,227.6 138.8,193.5 "/>
      <polygon class="st7" points="180.3,262.3 180.6,253 178.1,250.8 140.4,250.8 138.1,253 138.3,262.3 106.8,247.4 117.8,256.4 
        140.1,271.9 178.4,271.9 200.8,256.4 211.8,247.4 "/>
      <polygon class="st8" points="177.9,230.9 173.1,227.6 145.4,227.6 140.6,230.9 138.1,253 140.4,250.8 178.1,250.8 180.6,253 "/>
      <g>
        <polygon class="st9" points="278.3,114.2 286.8,73.4 274.1,35.5 177.9,106.9 214.9,138.2 267.2,153.5 278.8,140 273.8,136.4 
          281.8,129.1 275.6,124.3 283.6,118.2 	"/>
        <polygon class="st9" points="31.8,73.4 40.3,114.2 34.9,118.2 42.9,124.3 36.8,129.1 44.8,136.4 39.8,140 51.3,153.5 103.6,138.2 
          140.6,106.9 44.4,35.5 	"/>
      </g>
      <polygon class="st6" points="267.2,153.5 214.9,138.2 230.8,162.1 207.1,208.1 238.3,207.7 284.8,207.7 "/>
      <polygon class="st6" points="103.6,138.2 51.3,153.5 33.9,207.7 80.3,207.7 111.4,208.1 87.8,162.1 "/>
      <polygon class="st6" points="174.6,164.6 177.9,106.9 193.1,65.8 125.6,65.8 140.6,106.9 144.1,164.6 145.3,182.8 145.4,227.6 
        173.1,227.6 173.3,182.8 "/>
    </symbol>
    <symbol id="hedera-logo">
      <defs>
        <style>.cls-1{fill:#fff;}</style>
      </defs>
      <title>hedera-logo</title>
      <g id="Layer_2" data-name="Layer 2">
        <g id="Layer_1-2" data-name="Layer 1">
          <path d="M1250,0C559.64,0,0,559.64,0,1250S559.64,2500,1250,2500s1250-559.64,1250-1250S1940.36,0,1250,0"/>
          <path class="cls-1" d="M1758.12,1790.62H1599.38V1453.13H900.62v337.49H741.87V696.25H900.62v329.37h698.76V696.25h158.75Zm-850-463.75h698.75V1152.5H908.12Z"/>
        </g>
      </g>
    </symbol>
  </svg>

  <div class="relative bg-silver-md">

    <!-- container -->
    <main class="relative max-w-5xl mx-auto">
      <div class="flex flex-col min-h-screen lg:flex-row lg:items-center lg:p-8">
        <div class="flex flex-col flex-grow bg-white lg:shadow-2xl lg:rounded-lg lg:overflow-hidden">

          <!-- header -->
          <header class="flex-grow flex flex-row p-12 pt-5">
            <svg class="flex-1 mt-7 pl-0" viewBox="0 0 2500 2500" width="75" height="75">
              <use xlink:href="#hedera-logo"/>
            </svg>
            <div class="flex-grow md:pl-6 pl-0">
              <h1 class="sm:font-light text-2xl sm:text-3xl md:text-4xl text-primary-md mt-6">Hedera MetaMask Adapter</h1>
              <p class="sm:text-xl text-beta-md mt-3 leading-relaxed">Use Hedera inside MetaMask.</p>
            </div>
            <svg class="flex-1 mt-8 pl-0" viewBox="30 30 320 320" width="100" height="80" class="mr-1" xml:space="preserve">
              <use xlink:href="#metamask-fox"/>
            </svg>
          </header>

          <!-- page section -->
          <section class="border-t-2 border-silver-md flex-grow flex flex-col justify-center py-10 pt-6 px-12">
            <div class="md:pl-6 pl-0">
              <p class="text-slate-dk mt-1 text-sm md:text-base">Nullam elementum lacus ut eros malesuada, ut lacinia lacus mollis. Morbi fermentum est non egestas mollis. Sed non ex ex. Nullam leo diam, consequat condimentum diam ultrices, consequat egestas metus. Nulla auctor arcu non ante gravida hendrerit. Nam eget mi id eros auctor ornare quis vitae massa.</p>
            </div>
          </section>

          <!-- page section -->
          <section class="border-t-2 border-silver-md">

            <!-- items -->
            <div class="flex flex-wrap">

              <!-- item #1 -->
              <div class="flex flex-col px-12 py-10 w-full sm:w-1/2 sm:border-r sm:border-b border-silver-md">
                <div class="flex flex-grow">
                  <!-- item content -->
                  <section class="leading-relaxed flex flex-col ml-4 md:ml-6">
                    <h2 class="font-medium text-charcoal-md text-lg">Hedera Mainnet</h2>
                    <p class="text-slate-dk mt-1 text-sm md:text-base">Add Hedera `mainnet` configuration to MetaMask.</p>
                    <div class="pt-4 mt-auto">
                      <a class="inline-flex items-center text-beta-md hover:text-beta-dk" href="javascript:addchain('mainnet')">
                        <button type="button" class="inline-flex text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                          <svg viewBox="30 30 320 320" width="20" height="20" class="mr-1" xml:space="preserve">
                            <use xlink:href="#metamask-fox"/>
                          </svg>
                          Configure Mainnet
                        </button>
                      </a>
                    </div>
                  </section>
                </div>
              </div>

              <!-- item #2 -->
              <div class="flex flex-col px-12 py-10 w-full sm:w-1/2 sm:border-r sm:border-b border-silver-md">
                <div class="flex flex-grow">
                  <!-- item content -->
                  <section class="leading-relaxed flex flex-col ml-4 md:ml-6">
                    <h2 class="font-medium text-charcoal-md text-lg">Hedera Testnet</h2>
                    <p class="text-slate-dk mt-1 text-sm md:text-base">Add Hedera `testnet` configuration to MetaMask.</p>
                    <div class="pt-4 mt-auto">
                      <a class="inline-flex items-center text-beta-md hover:text-beta-dk" href="javascript:addchain('testnet')">
                        <button type="button" class="inline-flex text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">
                          <svg viewBox="30 30 320 320" width="20" height="20" class="mr-1" xml:space="preserve">
                            <use xlink:href="#metamask-fox"/>
                          </svg>
                          Configure Testnet
                        </button>
                      </a>
                    </div>
                  </section>
                </div>
              </div>
              <!-- end items -->

            </section>
            <!-- end page section -->

          </div>
        </div>
      </main>
      <!-- end container -->

    </div>
  </div>
  <script type="text/javascript">
    const MAINNET_PARAMS = {
      chainId: '0x122',
      chainName: 'Hedera Mainnet',
      nativeCurrency: {
          name: 'Hedera',
          symbol: 'HBar',
          decimals: 18
      },
      rpcUrls: ['http://localhost:58545'],
      blockExplorerUrls: ['https://app.dragonglass.me/hedera/']
    };
    const TESTNET_PARAMS = {
      chainId: '0x123',
      chainName: 'Hedera Testnet',
      nativeCurrency: {
          name: 'Hedera',
          symbol: 'HBar',
          decimals: 18
      },
      rpcUrls: ['http://localhost:38545'],
      blockExplorerUrls: ['https://testnet.dragonglass.me/hedera/']
    };
    async function addchain(chain) {
      console.log('addchain(%s)', chain);
      if (window.ethereum) {
        try {
          await ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: (chain === 'mainnet') ? MAINNET_PARAMS.chainId : TESTNET_PARAMS.chainId }],
          });
        } catch (switchError) {
          console.error(switchError);
          // This error code indicates that the chain has not been added to MetaMask.
          if (switchError.code === 4902) {
            console.log('trying wallet_addEthereumChain')
            ethereum.request({
              method: 'wallet_addEthereumChain',
              params: [(chain === 'mainnet') ? MAINNET_PARAMS : TESTNET_PARAMS]
            });
          }
        }
      }
    }
  </script>
</body>
</html>